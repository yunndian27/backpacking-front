(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"0378":function(e,t,r){"use strict";var s=r("7037"),o=r.n(s),a=r("ded3"),n=r.n(a),i=(r("d3b7"),r("e6cf"),r("e260"),r("3ca3"),r("ddb0"),r("4de4"),r("159b"),r("7db0"),r("d81d"),r("2b0e")),u=r("87e8"),l=r("d882"),c=r("dde5"),d=r("e704");t["a"]=i["a"].extend({name:"QForm",mixins:[u["a"]],props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean},computed:{onEvents:function(){return n()(n()({},this.qListeners),{},{submit:this.submit,reset:this.reset})}},mounted:function(){this.validateIndex=0,!0===this.autofocus&&this.focus()},methods:{validate:function(e){var t=this,r=[],s="boolean"===typeof e?e:!0!==this.noErrorFocus;this.validateIndex++;for(var a=this.getValidationComponents(),n=function(e,r){t.$emit("validation-"+(!0===e?"success":"error"),r)},i=function(e){var o=a[e],i=o.validate();if("function"===typeof i.then)r.push(i.then((function(e){return{valid:e,comp:o}}),(function(e){return{valid:!1,comp:o,error:e}})));else if(!0!==i){if(!1===t.greedy)return n(!1,o),!0===s&&"function"===typeof o.focus&&o.focus(),{v:Promise.resolve(!1)};r.push({valid:!1,comp:o})}},u=0;u<a.length;u++){var l=i(u);if("object"===o()(l))return l.v}if(0===r.length)return n(!0),Promise.resolve(!0);var c=this.validateIndex;return Promise.all(r).then((function(e){if(c===t.validateIndex){var r=e.filter((function(e){return!0!==e.valid}));if(0===r.length)return n(!0),!0;var o=r[0],a=o.valid,i=o.comp;return n(!1,i),!0===s&&!0!==a&&"function"===typeof i.focus&&i.focus(),!1}}))},resetValidation:function(){this.validateIndex++,this.getValidationComponents().forEach((function(e){"function"===typeof e.resetValidation&&e.resetValidation()}))},submit:function(e){var t=this;void 0!==e&&Object(l["l"])(e),this.validate().then((function(r){!0===r&&(void 0!==t.qListeners.submit?t.$emit("submit",e):void 0!==e&&void 0!==e.target&&"function"===typeof e.target.submit&&e.target.submit())}))},reset:function(e){var t=this;void 0!==e&&Object(l["l"])(e),this.$emit("reset"),this.$nextTick((function(){t.resetValidation(),!0===t.autofocus&&!0!==t.noResetFocus&&t.focus()}))},focus:function(){var e=this;Object(d["a"])((function(){if(e.$el){var t=e.$el.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(e.$el.querySelectorAll("[tabindex]"),(function(e){return e.tabIndex>-1}));null!==t&&void 0!==t&&t.focus()}}))},getValidationComponents:function(){return Array.prototype.map.call(this.$el.getElementsByClassName("q-validation-component"),(function(e){return e.__vue__})).filter((function(e){return void 0!==e&&"function"===typeof e.validate}))}},render:function(e){return e("form",{staticClass:"q-form",on:this.onEvents},Object(c["c"])(this,"default"))}})},"7f67":function(e,t,r){"use strict";var s=r("9e62"),o=r("d728");function a(e){if(!1===e)return 0;if(!0===e||void 0===e)return 1;var t=parseInt(e,10);return isNaN(t)?0:t}function n(e){var t=e.__qclosepopup;void 0!==t&&(e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup)}t["a"]={name:"close-popup",bind:function(e,t,r){var i=t.value;void 0!==e.__qclosepopup&&(n(e),e.__qclosepopup_destroyed=!0);var u={depth:a(i),handler:function(e){0!==u.depth&&setTimeout((function(){Object(s["b"])(r.componentInstance||r.context,e,u.depth)}))},handlerKey:function(e){!0===Object(o["a"])(e,13)&&u.handler(e)}};e.__qclosepopup=u,e.addEventListener("click",u.handler),e.addEventListener("keyup",u.handlerKey)},update:function(e,t){var r=t.value,s=t.oldValue;void 0!==e.__qclosepopup&&r!==s&&(e.__qclosepopup.depth=a(r))},unbind:function(e){void 0===e.__qclosepopup_destroyed?n(e):delete e.__qclosepopup_destroyed}}},9900:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"personalFile"}},[r("q-form",{staticClass:"q-gutter-md",on:{submit:e.onSubmit,reset:e.onReset}},[r("div",{staticClass:"q-mb-md"},[r("h2",{staticClass:"text-bold"},[e._v("編輯個人檔案")]),r("div",{staticClass:"text-grey"},[e._v("造訪你的個人檔案的使用者會看到以下資訊")])]),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"setTitle"},[e._v("照片")]),r("div",{staticClass:"flex items-center"},[r("q-avatar",{staticClass:"q-mr-md",attrs:{size:"100px"}},[r("img",{attrs:{src:"https://cdn.quasar.dev/img/avatar2.jpg"}})]),r("q-btn",{staticClass:"button",attrs:{unelevated:"",rounded:"",color:"primary",label:"變更"},on:{click:function(t){e.form.confirm=!0}}}),r("q-dialog",{attrs:{persistent:""},model:{value:e.form.confirm,callback:function(t){e.$set(e.form,"confirm",t)},expression:"form.confirm"}},[r("q-card",[r("q-card-section",{staticClass:"row items-center"},[r("div",{staticClass:"col-12 text-center text-dark q-mb-lg"},[e._v("變更你的照片")]),r("div",{staticClass:"col-12 flex justify-center q-pb-md"},[r("img-inputer",{attrs:{theme:"light",size:"small",placeholder:"點擊或拖曳選擇圖片","bottom-text":"點擊或拖曳以修改"},model:{value:e.form.userImg,callback:function(t){e.$set(e.form,"userImg",t)},expression:"form.userImg"}})],1)]),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"關閉",color:"primary"}}),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"確認",color:"primary"}})],1)],1)],1)],1)]),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"setTitle"},[e._v("使用者名稱")]),r("q-input",{attrs:{rounded:"",outlined:"",state:e.state.userName,placeholder:"帳號名稱"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"setTitle"},[e._v("自我介紹")]),r("q-input",{attrs:{outlined:"",type:"textarea",placeholder:"敘述一下自己吧"},model:{value:e.form.userDesc,callback:function(t){e.$set(e.form,"userDesc",t)},expression:"form.userDesc"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"setTitle"},[e._v("居住地")]),r("q-input",{attrs:{rounded:"",outlined:"",placeholder:"住在..."},model:{value:e.form.userPlace,callback:function(t){e.$set(e.form,"userPlace",t)},expression:"form.userPlace"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"setTitle"},[e._v("興趣")]),r("q-input",{attrs:{outlined:"",type:"textarea",placeholder:"興趣與愛好"},model:{value:e.form.userInterest,callback:function(t){e.$set(e.form,"userInterest",t)},expression:"form.userInterest"}})],1),r("div",{staticClass:"q-mb-md"},[r("div",{staticClass:"setTitle"},[e._v("職業")]),r("q-input",{attrs:{rounded:"",outlined:"",placeholder:"職業"},model:{value:e.form.userCareer,callback:function(t){e.$set(e.form,"userCareer",t)},expression:"form.userCareer"}})],1),r("div",{staticClass:"q-mb-lg"},[r("div",{staticClass:"setTitle"},[e._v("性別")]),r("div",{staticClass:"q-gutter-sm"},[r("q-radio",{attrs:{val:"male",label:"男性"},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}}),r("q-radio",{attrs:{val:"female",label:"女性"},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}}),r("q-radio",{attrs:{val:"secret",label:"不公開"},model:{value:e.form.userSex,callback:function(t){e.$set(e.form,"userSex",t)},expression:"form.userSex"}})],1)]),r("div",{staticClass:"flex justify-end"},[r("q-btn",{staticClass:"button",attrs:{unelevated:"",rounded:"",label:"儲存",type:"submit",color:"secondary"}}),r("q-btn",{staticClass:"button q-ml-md",attrs:{unelevated:"",rounded:"",label:"重設",type:"reset",color:"dark",outline:""}})],1)])],1)},o=[],a=r("c973"),n=r.n(a),i=(r("96cf"),{data:function(){return{form:{userImg:null,userName:"",userDesc:"",userPlace:"",userInterest:"",userCareer:"",confirm:!1,userSex:"male"}}},computed:{state:function(){var e=this.form.userName;return{userName:0===e.length?null:e.length>=4&&e.length<=20}}},methods:{onSubmit:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){var r,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(o in t.prev=0,s=new FormData,e.form)s.append(o,e.form[o]);if(0!==(null===(r=e.form._id)||void 0===r?void 0:r.length)){t.next=8;break}return t.next=6,e.$axios.post("/users",s,{headers:{authorization:"Bearer "+e.$store.state.user.jwt.token}});case 6:t.next=11;break;case 8:return t.next=10,e.$axios.patch("/users/"+e.form._id,s,{headers:{authorization:"Bearer "+e.$store.state.user.jwt.token}});case 10:!0!==e.accept&&e.$q.notify({color:"red-5",textColor:"white",icon:"warning",message:"個人檔案修改成功"});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Submitted"});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},onReset:function(){this.form={userImg:null,userName:"",userDesc:"",userPlace:"",userInterest:"",userCareer:"",confirm:!1,userSex:"male"}}},mounted:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/users/"+e.$store.state.user.user._id,{headers:{authorization:"Bearer "+e.$store.state.user.jwt.token}});case 3:t.next=9;break;case 5:t.prev=5,t.t0=t["catch"](0),console.log(t.t0),e.$q.dialog({title:"錯誤",message:"取得帳號失敗",color:"red-13",ok:!0});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}}),u=i,l=r("2877"),c=r("0378"),d=r("cb32"),f=r("9c40"),m=r("24e8"),p=r("f09f"),v=r("a370"),h=r("4b7e"),b=r("27f9"),x=r("3786"),q=r("7f67"),g=r("eebe"),C=r.n(g),_=Object(l["a"])(u,s,o,!1,null,null,null);t["default"]=_.exports;C()(_,"components",{QForm:c["a"],QAvatar:d["a"],QBtn:f["a"],QDialog:m["a"],QCard:p["a"],QCardSection:v["a"],QCardActions:h["a"],QInput:b["a"],QRadio:x["a"]}),C()(_,"directives",{ClosePopup:q["a"]})},eebe:function(e,t){e.exports=function(e,t,r){var s;if("function"===typeof e.exports?(s=e.exports.extendOptions,s[t]=e.exports.options[t]):s=e.options,void 0===s[t])s[t]=r;else{var o=s[t];for(var a in r)void 0===o[a]&&(o[a]=r[a])}}}}]);