(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{5218:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center q-mt-md",attrs:{id:"adminIndex"}},[n("div",{staticClass:"container"},[n("h2",{staticClass:"text-center"},[e._v("管理首頁")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"q-pt-md"},[n("q-table",{ref:"articleTable",attrs:{columns:e.columns,data:e.articles,"row-key":"artTitle",filter:e.filter,loading:e.loading,pagination:e.initialPagination,"selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("div",{staticClass:"text-h6 text-blue-8"},[e._v("最新好文")]),n("q-space"),n("q-input",{attrs:{outlined:"",dense:"",debounce:"300",color:"primary",placeholder:"查詢"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-image",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"image",attrs:{props:t}},[t.row.image?n("img",{staticStyle:{height:"50px"},attrs:{src:t.row.image}}):e._e()])])]}},{key:"body-cell-showing",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"showing",attrs:{props:t}},[e._v("\n                  "+e._s(t.row.showing?"V":"")+"\n                ")])])]}},{key:"body-cell-action",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"action",attrs:{props:t}},[n("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"edit_note"},on:{click:function(n){return e.editArticle(t.rowIndex)}}})],1)])]}}])})],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"q-pt-md"},[n("q-table",{ref:"articleTable",attrs:{columns:e.columns,data:e.articles,"row-key":"artTitle",filter:e.filter,loading:e.loading,pagination:e.initialPagination,"selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected01},on:{"update:selected":function(t){e.selected01=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("div",{staticClass:"text-h6 text-blue-8"},[e._v("看地圖 還世界 | 美食")]),n("q-space"),n("q-input",{attrs:{outlined:"",dense:"",debounce:"300",color:"primary",placeholder:"查詢"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-image",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"image",attrs:{props:t}},[t.row.image?n("img",{staticStyle:{height:"50px"},attrs:{src:t.row.image}}):e._e()])])]}},{key:"body-cell-showing",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"showing",attrs:{props:t}},[e._v("\n                  "+e._s(t.row.showing?"V":"")+"\n                ")])])]}},{key:"body-cell-action",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"action",attrs:{props:t}},[n("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"edit_note"},on:{click:function(n){return e.editArticle(t.rowIndex)}}})],1)])]}}])})],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"q-pt-md"},[n("q-table",{ref:"articleTable",attrs:{columns:e.columns,data:e.articles,"row-key":"artTitle",filter:e.filter,loading:e.loading,pagination:e.initialPagination,"selected-rows-label":e.getSelectedString,selection:"multiple",selected:e.selected02},on:{"update:selected":function(t){e.selected02=t}},scopedSlots:e._u([{key:"top",fn:function(){return[n("div",{staticClass:"text-h6 text-blue-8"},[e._v("台灣真美")]),n("q-space"),n("q-input",{attrs:{outlined:"",dense:"",debounce:"300",color:"primary",placeholder:"查詢"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-image",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"image",attrs:{props:t}},[t.row.image?n("img",{staticStyle:{height:"50px"},attrs:{src:t.row.image}}):e._e()])])]}},{key:"body-cell-showing",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"showing",attrs:{props:t}},[e._v("\n                  "+e._s(t.row.showing?"V":"")+"\n                ")])])]}},{key:"body-cell-action",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("div",{key:"action",attrs:{props:t}},[n("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"edit_note"},on:{click:function(n){return e.editArticle(t.rowIndex)}}})],1)])]}}])})],1)])])])])},i=[],r=n("c973"),l=n.n(r),o=(n("96cf"),n("d81d"),n("99af"),{name:"adminHome",data:function(){return{selected:[],selected01:[],selected02:[],articles:[],columns:[{name:"artTitle",required:!0,label:"標題",field:function(e){return e.artTitle},align:"left",sortable:!0},{name:"image",label:"封面照片",field:"image",align:"center"},{name:"type",label:"主題類型",field:"type",align:"left",sortable:!0},{name:"category",label:"分類",field:"category",align:"left",sortable:!0},{name:"showing",label:"狀態",field:"showing",align:"center",sortable:!0},{name:"author",label:"作者",field:"author",align:"center"},{name:"date",label:"時間",field:"date",align:"center",sortable:!0}],loading:!1,filter:"",dialog:!1,maximizedToggle:!0,initialPagination:{sortBy:"desc",descending:!1,rowsPerPage:7},form:{artTitle:"",description:"",type:null,category:null,image:null,showing:!0,author:"user.account",_id:""}}},methods:{getSelectedString:function(){var e,t;return 0===(null===(e=this.selected)||void 0===e?void 0:e.length)?"":"已選取 ".concat(null===(t=this.selected)||void 0===t?void 0:t.length," 個")}},mounted:function(){var e=this;return l()(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/articles/all",{headers:{authorization:"Bearer "+e.$store.state.user.jwt.token}});case 3:n=t.sent,a=n.data,e.articles=a.result.map((function(t){return t.image&&(t.image="".concat("https://backpacking20210824.herokuapp.com","/files/").concat(t.image)),t.date=new Date(t.date).toLocaleString(),t.author=e.$store.state.user.user.account,t})),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),e.$q.dialog({title:"錯誤",message:"取得文章失敗",color:"red-13",ok:!0});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),s=o,c=n("2877"),d=n("eaac"),u=n("2c91"),p=n("27f9"),f=n("0016"),g=n("db86"),m=n("9c40"),y=n("eebe"),b=n.n(y),h=Object(c["a"])(s,a,i,!1,null,null,null);t["default"]=h.exports;b()(h,"components",{QTable:d["a"],QSpace:u["a"],QInput:p["a"],QIcon:f["a"],QTd:g["a"],QBtn:m["a"]})}}]);