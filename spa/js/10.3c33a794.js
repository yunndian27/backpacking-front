(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"013f":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("div",{attrs:{id:"login"}},[n("div",{staticClass:"logCard"},[n("div",{staticClass:"logform"},[n("h2",{staticClass:"logTitle text-grey-9"},[t._v("登入論壇")]),n("div",{staticClass:"logform"},[n("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[n("q-input",{staticClass:"inputBg",attrs:{outlined:"",type:"text",label:"帳號 *",hint:"帳號長度限制為 4 到 20 個字","lazy-rules":"",state:t.state.account,rules:[function(t){return t&&t.length>=4||"帳號長度限制為 4 到 20 個字"}]},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}}),n("q-input",{staticClass:"inputBg",attrs:{outlined:"",type:"password",label:"密碼",hint:"密碼長度限制為 6 到 20 個字","lazy-rules":"",state:t.state.password,rules:[function(t){return t&&t.length>=6||"密碼長度限制為 6 到 20 個字"}]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),n("div",{staticClass:"q-gutter-sm reglog"},[n("div",{staticClass:"textLink",attrs:{flat:"",to:"/register"}},[t._v("註冊帳號")]),t._v(", "),n("div",{staticClass:"textLink",attrs:{flat:""},on:{click:function(e){t.fixedLog=!0}}},[t._v("忘記帳號/密碼?")])]),n("q-dialog",{attrs:{persistent:""},model:{value:t.fixedLog,callback:function(e){t.fixedLog=e},expression:"fixedLog"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("輸入信箱")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.prompt=!1}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"關閉"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"送出"}})],1)],1)],1),n("div",{staticClass:"flex justify-center q-pt-lg"},[n("q-btn",{staticClass:"q-px-md",attrs:{unelevated:"",label:"登入",type:"submit",color:"primary"}}),n("q-btn",{staticClass:"q-px-md q-ml-lg",attrs:{outline:"",label:"重置",type:"reset",color:"grey"}})],1)],1)],1)])])])])},s=[],i=n("c973"),a=n.n(i),r=(n("96cf"),{data:function(){return{form:{account:"",password:""},right:!1,fixedLog:!1,address:""}},computed:{state:function(){var t=this.form.account,e=this.form.password;return{account:0===t.length?null:t.length>=4&&t.length<=20,password:0===e.length?null:e.length>=6&&e.length<=20}}},methods:{onReset:function(){this.form.account="",this.form.password=""},onSubmit:function(){var t=this;return a()(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/users/login",t.form);case 3:n=e.sent,o=n.data,t.$q.dialog({title:"登入成功",message:"歡迎登入背包客棧",color:"red-13",ok:!0,preventClose:!0}),t.$store.commit("user/login",o),t.$router.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),t.$q.dialog({title:"失敗",message:e.t0.response.data.message,color:"red-13",ok:!0});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}}),c=r,l=n("2877"),u=n("9989"),d=n("0378"),p=n("27f9"),f=n("8f8e"),h=n("24e8"),v=n("f09f"),m=n("a370"),g=n("4b7e"),y=n("9c40"),b=n("7f67"),x=n("eebe"),q=n.n(x),_=Object(l["a"])(c,o,s,!1,null,null,null);e["default"]=_.exports;q()(_,"components",{QPage:u["a"],QForm:d["a"],QInput:p["a"],QCheckbox:f["a"],QDialog:h["a"],QCard:v["a"],QCardSection:m["a"],QCardActions:g["a"],QBtn:y["a"]}),q()(_,"directives",{ClosePopup:b["a"]})},"0378":function(t,e,n){"use strict";var o=n("7037"),s=n.n(o),i=n("ded3"),a=n.n(i),r=(n("d3b7"),n("e6cf"),n("e260"),n("3ca3"),n("ddb0"),n("4de4"),n("159b"),n("7db0"),n("d81d"),n("2b0e")),c=n("87e8"),l=n("d882"),u=n("dde5"),d=n("e704");e["a"]=r["a"].extend({name:"QForm",mixins:[c["a"]],props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean},computed:{onEvents:function(){return a()(a()({},this.qListeners),{},{submit:this.submit,reset:this.reset})}},mounted:function(){this.validateIndex=0,!0===this.autofocus&&this.focus()},methods:{validate:function(t){var e=this,n=[],o="boolean"===typeof t?t:!0!==this.noErrorFocus;this.validateIndex++;for(var i=this.getValidationComponents(),a=function(t,n){e.$emit("validation-"+(!0===t?"success":"error"),n)},r=function(t){var s=i[t],r=s.validate();if("function"===typeof r.then)n.push(r.then((function(t){return{valid:t,comp:s}}),(function(t){return{valid:!1,comp:s,error:t}})));else if(!0!==r){if(!1===e.greedy)return a(!1,s),!0===o&&"function"===typeof s.focus&&s.focus(),{v:Promise.resolve(!1)};n.push({valid:!1,comp:s})}},c=0;c<i.length;c++){var l=r(c);if("object"===s()(l))return l.v}if(0===n.length)return a(!0),Promise.resolve(!0);var u=this.validateIndex;return Promise.all(n).then((function(t){if(u===e.validateIndex){var n=t.filter((function(t){return!0!==t.valid}));if(0===n.length)return a(!0),!0;var s=n[0],i=s.valid,r=s.comp;return a(!1,r),!0===o&&!0!==i&&"function"===typeof r.focus&&r.focus(),!1}}))},resetValidation:function(){this.validateIndex++,this.getValidationComponents().forEach((function(t){"function"===typeof t.resetValidation&&t.resetValidation()}))},submit:function(t){var e=this;void 0!==t&&Object(l["l"])(t),this.validate().then((function(n){!0===n&&(void 0!==e.qListeners.submit?e.$emit("submit",t):void 0!==t&&void 0!==t.target&&"function"===typeof t.target.submit&&t.target.submit())}))},reset:function(t){var e=this;void 0!==t&&Object(l["l"])(t),this.$emit("reset"),this.$nextTick((function(){e.resetValidation(),!0===e.autofocus&&!0!==e.noResetFocus&&e.focus()}))},focus:function(){var t=this;Object(d["a"])((function(){if(t.$el){var e=t.$el.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(t.$el.querySelectorAll("[tabindex]"),(function(t){return t.tabIndex>-1}));null!==e&&void 0!==e&&e.focus()}}))},getValidationComponents:function(){return Array.prototype.map.call(this.$el.getElementsByClassName("q-validation-component"),(function(t){return t.__vue__})).filter((function(t){return void 0!==t&&"function"===typeof t.validate}))}},render:function(t){return t("form",{staticClass:"q-form",on:this.onEvents},Object(u["c"])(this,"default"))}})},"7f67":function(t,e,n){"use strict";var o=n("9e62"),s=n("d728");function i(t){if(!1===t)return 0;if(!0===t||void 0===t)return 1;var e=parseInt(t,10);return isNaN(e)?0:e}function a(t){var e=t.__qclosepopup;void 0!==e&&(t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup)}e["a"]={name:"close-popup",bind:function(t,e,n){var r=e.value;void 0!==t.__qclosepopup&&(a(t),t.__qclosepopup_destroyed=!0);var c={depth:i(r),handler:function(t){0!==c.depth&&setTimeout((function(){Object(o["b"])(n.componentInstance||n.context,t,c.depth)}))},handlerKey:function(t){!0===Object(s["a"])(t,13)&&c.handler(t)}};t.__qclosepopup=c,t.addEventListener("click",c.handler),t.addEventListener("keyup",c.handlerKey)},update:function(t,e){var n=e.value,o=e.oldValue;void 0!==t.__qclosepopup&&n!==o&&(t.__qclosepopup.depth=i(n))},unbind:function(t){void 0===t.__qclosepopup_destroyed?a(t):delete t.__qclosepopup_destroyed}}},9989:function(t,e,n){"use strict";var o=n("ded3"),s=n.n(o),i=n("2b0e"),a=n("87e8"),r=n("dde5");e["a"]=i["a"].extend({name:"QPage",mixins:[a["a"]],inject:{pageContainer:{default:function(){console.error("QPage needs to be child of QPageContainer")}},layout:{}},props:{padding:Boolean,styleFn:Function},computed:{style:function(){var t=(!0===this.layout.header.space?this.layout.header.size:0)+(!0===this.layout.footer.space?this.layout.footer.size:0);if("function"===typeof this.styleFn){var e=!0===this.layout.container?this.layout.containerHeight:this.$q.screen.height;return this.styleFn(t,e)}return{minHeight:!0===this.layout.container?this.layout.containerHeight-t+"px":0===this.$q.screen.height?"calc(100vh - ".concat(t,"px)"):this.$q.screen.height-t+"px"}},classes:function(){if(!0===this.padding)return"q-layout-padding"}},render:function(t){return t("main",{staticClass:"q-page",style:this.style,class:this.classes,on:s()({},this.qListeners)},Object(r["c"])(this,"default"))}})},eebe:function(t,e){t.exports=function(t,e,n){var o;if("function"===typeof t.exports?(o=t.exports.extendOptions,o[e]=t.exports.options[e]):o=t.options,void 0===o[e])o[e]=n;else{var s=o[e];for(var i in n)void 0===s[i]&&(s[i]=n[i])}}}}]);